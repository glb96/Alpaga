<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>2. File management &#8212; Alpaga 1.2 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=61243dd2"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. Cleaning and Averaging Spectra" href="cleaning_averaging_spectra.html" />
    <link rel="prev" title="1. Installation" href="installation.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <blockquote>
<div></div></blockquote>
<section id="file-management">
<span id="file-management-page"></span><h1><span class="section-number">2. </span>File management<a class="headerlink" href="#file-management" title="Link to this heading">¶</a></h1>
<p>In this page, we will explain how the data are handled by Alpaga. First, how the data are expected to be stored and named, then how to open them to start the procedure.</p>
<section id="expected-data-structure">
<h2><span class="section-number">2.1. </span>Expected data structure<a class="headerlink" href="#expected-data-structure" title="Link to this heading">¶</a></h2>
<p>The numerical procedure is built around the experimental one:</p>
<p>For a given analyser angle (either V/H or S/P depending on how you prefer to call this angle) of the 2 omega photon and other experimental parameters (fundamental power, sample, temperature, number of surfactant/lama per metre square), a directory regroups the measured spectra for one or several incoming polarisation angle.
In this directory, ‘’angle’’ can vary arbitrary, as long as the name of the file follow this structure:</p>
<p>prefix_angle-value_iter-number.extention</p>
<p>This structure is defined through several internal function, and more especially by the alpaga.standard_file_name function:</p>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">file_management.</span></span><span class="sig-name descname"><span class="pre">standard_file_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefixe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iteration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extention</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.dat'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/file_management.html#standard_file_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Define how to built the file name of an acquisition.</p>
<p>You may define your own function if your file does not follow the same structure. However, we warmly recommend to use the same input/output for this function as follow:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prefixe</strong> (<em>str</em>) – The prefix</p></li>
<li><p><strong>angle</strong> (<em>str</em><em> or </em><em>bool</em>) – [Optional] If not bool, update the name of the file with this ‘angle’ value.</p></li>
<li><p><strong>iteration</strong> (<em>str</em><em> or </em><em>bool</em>) – [Optional] If not bool, update the name of the file with this ‘iteration’ value.</p></li>
<li><p><strong>extention</strong> (<em>str</em>) – [Optional] The extention of the spectra file. Default value: ‘.dat’</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>name</strong> – the name of the file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>For this standard function, if the input is:
<em>prefixe</em> = ‘polarV’
<em>angle</em> = ‘42.0’
<em>iteration</em> = ‘4’
<em>extention</em> = ‘.dat’
output is: ‘polarV_42.0_4.dat’</p>
</dd></dl>

<p>You can define another structure for the file, see the last paragraph.</p>
<p>For example, in the directory: /home/lama/Datas/Water_acquisition/V_analser, there are the files: spectra_water_v_2.0_1.dat, spectra_water_v_2.0_2.dat, spectra_water_v_4.0_1.dat, spectra_water_v_4.0_2.dat, spectra_water_v_6.0_1.dat, spectra_water_v_6.0_2.dat . The prefix for all these files is  /home/lama/Datas/Water_acquisition/V_analser/spectra_water_v, the list of the angle is [2.0, 4.0, 6.0] and the total number of iterations is 2.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The Alpaga developer warmly recommend you to always define an absolute path to your data rather than local one. If you ran the code in the directory  /home/lama/Datas/Water_acquisition, you may indeed use a shorter prefix such as V_analser/spectra_water_v. However, it is more stable to keep with /home/lama/Datas/Water_acquisition/V_analser/spectra_water_v anytime.</p>
</div>
<p>The angles can be whatever string, you can encode other varying properties using this framework: there is no need for this ‘’list of angle’’ to be bounded, or evenly distributed. Be just aware that the very last analysis (<a class="reference internal" href="analysis_SHS.html#analysis-shs-page"><span class="std std-ref">from the experimental data to the real observable you want like the i4 or surface susceptibility</span></a> ) may not work as expected.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Alpaga can treat all or only part of the ‘angle’ available in a directory, see <a class="reference internal" href="polarisation_procedure.html#polarisation-procedure-page"><span class="std std-ref">this page</span></a> for more information.</p>
</div>
<a class="reference internal image-reference" href="_images/alpaga_6.jpg"><img alt="_images/alpaga_6.jpg" class="align-right" src="_images/alpaga_6.jpg" style="width: 250px;" />
</a>
<p>For each acquisition with the same experimental parameters (for instance angle=2.0), several acquisitions will be made in order to average the spectra. See <a class="reference internal" href="cleaning_averaging_spectra.html#cleaning-averaging-spectra-page"><span class="std std-ref">the cleaning procedure</span></a> for more details. These acquisitions are stored using different iterations value, from 1 to N. Within this example, there are 2 iterations: spectra_water_v_2.0_1.dat and spectra_water_v_2.0_2.dat which will be used to get a cleaned spectrum for the angle value 2.0.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For all the angle value, the exact same amount of iterations should be given. If you want to average over less iterations then available, you can redefine it using iter_number. See the See <a class="reference internal" href="cleaning_averaging_spectra.html#cleaning-averaging-spectra-page"><span class="std std-ref">the cleaning procedure</span></a>.</p>
</div>
<p>Now that we have presented the data structure, let’s be more explicit. First, we will see how to open a ‘’single acquisition’’, meaning for a given ‘’angle’’: the name should be  prefix_iter-number.extention . Then, we will see how to treat acquisition for several angles, meaning files with names: prefix_angle-value_iter-number.extention . The output given by these functions will be used later on during the procedure.</p>
</section>
<section id="open-single-acquisition">
<h2><span class="section-number">2.2. </span>Open single acquisition<a class="headerlink" href="#open-single-acquisition" title="Link to this heading">¶</a></h2>
<p>To get the Alpaga parameters to treat a single acquisition located in a directory, use the function:</p>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">file_management.</span></span><span class="sig-name descname"><span class="pre">find_file_iter_from_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extention</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.dat'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/file_management.html#find_file_iter_from_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Return the prefix (<em>prefix_file</em>), the number of iter (<em>N_iter</em>) and the extention (<em>extention</em>) of a single acquisition located in the repertory <em>directory</em>.</p>
<p>The expected name of the file is:</p>
<p>directory + prefix + _ + i + extention</p>
<p>Where i goes from 1 to <em>N_iter</em>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> (<em>str</em>) – The directory where is stored the datas</p></li>
<li><p><strong>extention</strong> (<em>str</em>) – [Optional] The extention of the spectra file. Default value: ‘.dat’</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>prefix_file</strong> (<em>str</em>) – The prefixe shared by all the spectra iteration.</p></li>
<li><p><strong>N_iter</strong> (<em>int</em>) – The number of iter found for this prefixe. Alpaga has check that all the iter are present to avoid ‘File not found’ error later on.</p></li>
<li><p><strong>extention</strong> (<em>str</em>) – The extention of the detected spectra file. Same value as in the input</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Let’s assume that in the directory /home/lama/Datas/Water_acquisition/Test_120sec TOCHANGE, is located the spectra: water_1.dat, water_2.dat, water_3.dat. The prefix of these file is ‘water’, the total number of iter is <em>N_iter</em> = 3, and the extention is .dat . In order to get automatically theses information, use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">directory</span> <span class="o">=</span> <span class="s1">&#39;/home/lama/Datas/Water_acquisition/Test_120sec&#39;</span>
<span class="n">prefix</span><span class="p">,</span> <span class="n">N_iter</span><span class="p">,</span> <span class="n">extention</span> <span class="o">=</span> <span class="n">alpaga</span><span class="o">.</span><span class="n">find_file_iter_from_dir</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The prefix for all the file is: &quot;&#39;</span> <span class="o">+</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;&quot; with &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">N_iter</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; iter. The extention is: &#39;</span> <span class="o">+</span> <span class="n">extention</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="open-angle-acquisition">
<h2><span class="section-number">2.3. </span>Open angle acquisition<a class="headerlink" href="#open-angle-acquisition" title="Link to this heading">¶</a></h2>
<p id="open-angle-acquisition-section">To get the Alpaga parameters to treat an acquisition with several angle value located in a directory, use the function:</p>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">file_management.</span></span><span class="sig-name descname"><span class="pre">find_angle_iter_from_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extention</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.dat'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/file_management.html#find_angle_iter_from_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Return the prefix (<em>prefix_file</em>), the list of the angle (<em>L_files_angles</em>) the number of iter (<em>N_iter</em>) and the extention (<em>extention</em>) of an acquisition located in the repertory <em>directory</em>.</p>
<p>The expected name of the file is:</p>
<p>directory + prefix + _ + k + _ + i + extention</p>
<p>Where k goes within all the value of <em>L_files_angles</em>. k can be a float (please try to avoid very long decimal angle value) and where i goes from 1 to <em>N_iter</em>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> (<em>str</em>) – The directory where is stored the datas</p></li>
<li><p><strong>extention</strong> (<em>str</em>) – [Optional] The extention of the spectra file. Default value: ‘.dat’</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>prefix_file</strong> (<em>str</em>) – The prefixe shared by all the spectra iteration.</p></li>
<li><p><strong>L_files_angles</strong> (<em>list of str</em>) – The list of the angle found. <em>L_files_angles</em> is a list of string – to avoid bad behavior if your angles has a name like 4.10.</p></li>
<li><p><strong>N_iter</strong> (<em>int</em>) – The number of iter found for this prefixe. Alpaga has check that all the iter are present for all the angle to avoid ‘File not found’ error later on.</p></li>
<li><p><strong>extention</strong> (<em>str</em>) – The extention of the detected spectra file. Same value as in the input</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Let’s assume that in the directory /home/lama/Datas/Water_acquisition/Test_120sec TOCHANGE, is located the spectra: water_4.0_1.dat, water_4.0_2.dat, water_15.0_2.dat, water_15.0_2.dat. The prefix of these file is ‘water’, the total number of iter is <em>N_iter</em> = 2, the list of angle is <em>L_files_angles</em> = [4.0, 15.0] and the extention is .dat . In order to get automatically theses information, use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">directory</span> <span class="o">=</span> <span class="s1">&#39;/home/lama/Datas/Water_acquisition/Test_120sec&#39;</span>
<span class="n">prefix</span><span class="p">,</span> <span class="n">L_files_angles</span><span class="p">,</span> <span class="n">N_iter</span><span class="p">,</span> <span class="n">extention</span> <span class="o">=</span> <span class="n">alpaga</span><span class="o">.</span><span class="n">find_angle_iter_from_dir</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The prefix for all the file is: &quot;&#39;</span> <span class="o">+</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;&quot; with &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">N_iter</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; iter. The angle found are &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">L_files_angles</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;. The extention is: &#39;</span> <span class="o">+</span> <span class="n">extention</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<a class="reference internal image-reference" href="_images/alpaga_11.jpg"><img alt="_images/alpaga_11.jpg" class="align-right" src="_images/alpaga_11.jpg" style="width: 250px;" />
</a>
</section>
<section id="define-your-own-set-of-file">
<h2><span class="section-number">2.4. </span>Define your own set of file<a class="headerlink" href="#define-your-own-set-of-file" title="Link to this heading">¶</a></h2>
<p>In order to go further, you need to have defined a general prefix, list of angles, number of iterations and the extenuation. If you have used the previous procedure, be just aware that you have to set the prefix <strong>with</strong> the general path, <em>i.e.</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">prefix_general</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">prefix</span><span class="p">)</span>
</pre></div>
</div>
<p>If you want to set yourself these values, you can. Either if you built your own procedure using only piece of Alpaga (therefore you should be good enough in python and thus not need advice), or in the initial parameter of the automatised procedure alpaga.polarisation_intensity, see <a class="reference internal" href="polarisation_procedure.html#polarisation-procedure-page"><span class="std std-ref">here</span></a>.</p>
<p>Moreover, if you do not use the same structure, you can still use the majority of the code, expect the alpaga.find_file_iter_from_dir and alpaga.find_angle_iter_from_dir function. To do so, you would have to define your own function that define how to built the name of the file provided a ‘prefix’, ‘angle’, ‘iteration’ and ‘extension’. In other words, your own alpaga.standard_file_name function. See the tutorial for more example.</p>
<p>To include this function and replace the standard structure, use the optional argument <em>fct_name</em> of the alpaga.averaging_and_cleaning and <strong>alpaga.polarisation_intensity</strong> function.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The  <a class="reference internal" href="cleaning_averaging_spectra.html#cleaning-averaging-spectra-page"><span class="std std-ref">next procedure step</span></a> is to average the clean every spectrum and to perform the average over all the acquisition ($N_iter$).</p>
<dl class="field-list simple">
<dt class="field-odd">Release<span class="colon">:</span></dt>
<dd class="field-odd"><p>1.2</p>
</dd>
<dt class="field-even">Date<span class="colon">:</span></dt>
<dd class="field-even"><p>Aug 20, 2025</p>
</dd>
</dl>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/alpaga_logo.svg" alt="Logo of Alpaga"/>
            </a></p>
<h1 class="logo"><a href="index.html">Alpaga</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">1. Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. File management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#expected-data-structure">2.1. Expected data structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#open-single-acquisition">2.2. Open single acquisition</a></li>
<li class="toctree-l2"><a class="reference internal" href="#open-angle-acquisition">2.3. Open angle acquisition</a></li>
<li class="toctree-l2"><a class="reference internal" href="#define-your-own-set-of-file">2.4. Define your own set of file</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cleaning_averaging_spectra.html">3. Cleaning and Averaging Spectra</a></li>
<li class="toctree-l1"><a class="reference internal" href="fitting_procedure.html">4. Fitting the Gaussian</a></li>
<li class="toctree-l1"><a class="reference internal" href="polarisation_procedure.html">5. Polarisation Procedure</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysis_SHS.html">6. SHS analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysis_SSHG.html">7. SSHG analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_advice.html">8. Python advice</a></li>
<li class="toctree-l1"><a class="reference internal" href="experimental_advice.html">9. Experimental and procedure advice</a></li>
<li class="toctree-l1"><a class="reference internal" href="for_developpers.html">10. For Developpers</a></li>
<li class="toctree-l1"><a class="reference internal" href="alpaga.html">11. Source code</a></li>
<li class="toctree-l1"><a class="reference internal" href="devs_page.html">12. Alpaga’s developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">13. Reference</a></li>
</ul>


<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;L-GPL.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/file_management.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>